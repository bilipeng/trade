# ç³»ç»Ÿæ“ä½œé€»è¾‘é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æ¦‚è¿°

å½“å‰ä¸šè´¢èåˆç®¡ç†ç³»ç»Ÿå­˜åœ¨ä»¥ä¸‹æ“ä½œé€»è¾‘é—®é¢˜ï¼š

1. **åŠŸèƒ½å®ç°ä¸æŒ‰é’®ç»‘å®šä¸ä¸€è‡´**ï¼šéƒ¨åˆ†åŠŸèƒ½å·²ç»å®ç°ï¼Œä½†æŒ‰é’®ç»‘å®šçš„æ˜¯"åŠŸèƒ½å¼€å‘ä¸­"çš„æç¤ºä¿¡æ¯
2. **ç¼ºå°‘å…¨å±€åˆ·æ–°åŠŸèƒ½**ï¼šç³»ç»Ÿç¼ºå°‘ä¸€ä¸ªèƒ½å¤Ÿåˆ·æ–°æ‰€æœ‰æ¨¡å—æ•°æ®çš„å…¨å±€åˆ·æ–°æŒ‰é’®
3. **æ¨¡å—é—´è·³è½¬é€»è¾‘ä¸å®Œå–„**ï¼šä»ä¸€ä¸ªæ¨¡å—è·³è½¬åˆ°å¦ä¸€ä¸ªæ¨¡å—æ—¶ï¼Œæ•°æ®ä¸ä¼šè‡ªåŠ¨åˆ·æ–°æˆ–å…³è”
4. **é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€**ï¼šä¸åŒæ¨¡å—çš„é”™è¯¯å¤„ç†æ–¹å¼ä¸ä¸€è‡´ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ
5. **åŠŸèƒ½çŠ¶æ€ä¸æ˜ç¡®**ï¼šç”¨æˆ·æ— æ³•æ¸…æ¥šåœ°çŸ¥é“å“ªäº›åŠŸèƒ½å·²å®ç°ï¼Œå“ªäº›åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­

## è¯¦ç»†é—®é¢˜åˆ†æ

### 1. åŠŸèƒ½å®ç°ä¸æŒ‰é’®ç»‘å®šä¸ä¸€è‡´

#### 1.1 ä¸šåŠ¡ç®¡ç†æ¨¡å—

åœ¨`BusinessEventView`ç±»ä¸­ï¼Œä»¥ä¸‹åŠŸèƒ½çš„æŒ‰é’®ç»‘å®šäº†"åŠŸèƒ½å¼€å‘ä¸­"çš„æç¤ºä¿¡æ¯ï¼Œä½†å®é™…ä¸Šè¿™äº›åŠŸèƒ½å¯èƒ½å·²ç»å®ç°ï¼š

```python
def view_approval(self, approval_id):
    """æŸ¥çœ‹å…³è”çš„å®¡æ‰¹è®°å½•"""
    QMessageBox.information(self, "åŠŸèƒ½å¼€å‘ä¸­", f"æŸ¥çœ‹å®¡æ‰¹è®°å½•åŠŸèƒ½å¼€å‘ä¸­ï¼Œå®¡æ‰¹ID: {approval_id}")
    # å¾…å®ç°ï¼šè·³è½¬åˆ°å®¡æ‰¹è¯¦æƒ…é¡µé¢

def view_finance(self, finance_id):
    """æŸ¥çœ‹å…³è”çš„è´¢åŠ¡è®°å½•"""
    QMessageBox.information(self, "åŠŸèƒ½å¼€å‘ä¸­", f"æŸ¥çœ‹è´¢åŠ¡è®°å½•åŠŸèƒ½å¼€å‘ä¸­ï¼Œè´¢åŠ¡ID: {finance_id}")
    # å¾…å®ç°ï¼šè·³è½¬åˆ°è´¢åŠ¡è®°å½•è¯¦æƒ…é¡µé¢

def create_finance_record(self, business_id):
    """ä¸ºå·²å®¡æ‰¹çš„ä¸šåŠ¡äº‹ä»¶åˆ›å»ºè´¢åŠ¡è®°å½•"""
    QMessageBox.information(self, "åŠŸèƒ½å¼€å‘ä¸­", f"ä¸ºä¸šåŠ¡äº‹ä»¶ ID: {business_id} åˆ›å»ºè´¢åŠ¡è®°å½•åŠŸèƒ½å¼€å‘ä¸­")
    # å¾…å®ç°ï¼šæ‰“å¼€è´¢åŠ¡è®°å½•åˆ›å»ºå¯¹è¯æ¡†ï¼Œé¢„å¡«å……ä¸šåŠ¡æ•°æ®
```

#### 1.2 æ¨¡å—é—´è·³è½¬é—®é¢˜

åœ¨`submit_to_approval`æ–¹æ³•ä¸­ï¼Œå°è¯•è·³è½¬åˆ°å®¡æ‰¹ç®¡ç†ç•Œé¢çš„ä»£ç å­˜åœ¨é—®é¢˜ï¼š

```python
if reply == QMessageBox.StandardButton.Yes:
    # å‘å‡ºä¿¡å·ï¼Œè®©ä¸»çª—å£åˆ‡æ¢åˆ°å®¡æ‰¹ç®¡ç†ç•Œé¢
    # æ­¤å¤„éœ€è¦æ ¹æ®å…·ä½“çš„ä¿¡å·å®ç°è°ƒæ•´
    # å¦‚æœæ‚¨çš„BusinessEventViewç±»ä¸­æ²¡æœ‰å®šä¹‰ä¿¡å·ï¼Œå¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ç°ç•Œé¢åˆ‡æ¢
    # ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡ä¸»çª—å£æä¾›çš„æ–¹æ³•è¿›è¡Œåˆ‡æ¢
    if hasattr(self.parent(), "switch_to_approval_view"):
        self.parent().switch_to_approval_view(business_id)
    else:
        QMessageBox.information(self, "æç¤º", "è¯·æ‰‹åŠ¨åˆ‡æ¢åˆ°å®¡æ‰¹ç®¡ç†ç•Œé¢å¹¶åˆ·æ–°æ•°æ®")
```

è¿™æ®µä»£ç æ£€æŸ¥çˆ¶çª—å£æ˜¯å¦æœ‰`switch_to_approval_view`æ–¹æ³•ï¼Œä½†å®é™…ä¸Šä¸»çª—å£ä¸­å¹¶æ²¡æœ‰å®šä¹‰è¿™ä¸ªæ–¹æ³•ã€‚

### 2. ç¼ºå°‘å…¨å±€åˆ·æ–°åŠŸèƒ½

åœ¨ä¸»çª—å£(`MainWindow`ç±»)ä¸­ï¼Œå·²ç»å®šä¹‰äº†åˆ·æ–°æŒ‰é’®ï¼Œä½†æ²¡æœ‰ç»‘å®šä»»ä½•åŠŸèƒ½ï¼š

```python
# æ·»åŠ åˆ·æ–°æŒ‰é’®
refresh_action = QAction("ğŸ”„ åˆ·æ–°", self)
refresh_action.setToolTip("åˆ·æ–°å½“å‰è§†å›¾æ•°æ®")
quick_actions.addAction(refresh_action)
```

è¿™ä¸ªåˆ·æ–°æŒ‰é’®åº”è¯¥èƒ½å¤Ÿåˆ·æ–°å½“å‰æ´»åŠ¨è§†å›¾çš„æ•°æ®ï¼Œä½†ç›®å‰æ²¡æœ‰è¿æ¥åˆ°ä»»ä½•æ§½å‡½æ•°ã€‚

### 3. å…¶ä»–æ“ä½œé€»è¾‘é—®é¢˜

1. **é€šçŸ¥åŠŸèƒ½æœªå®ç°**ï¼šä¸»çª—å£ä¸­æœ‰é€šçŸ¥æŒ‰é’®ï¼Œä½†æ²¡æœ‰å®ç°é€šçŸ¥åŠŸèƒ½
2. **ç³»ç»Ÿè®¾ç½®åŠŸèƒ½æœªå®ç°**ï¼šä¸»çª—å£ä¸­æœ‰ç³»ç»Ÿè®¾ç½®æŒ‰é’®ï¼Œä½†æ²¡æœ‰ç»‘å®šä»»ä½•åŠŸèƒ½
3. **å¸®åŠ©åŠŸèƒ½æœªå®ç°**ï¼šä¸»çª—å£ä¸­æœ‰å¸®åŠ©æŒ‰é’®ï¼Œä½†æ²¡æœ‰ç»‘å®šä»»ä½•åŠŸèƒ½

## è§£å†³æ–¹æ¡ˆ

### 1. ä¿®å¤åŠŸèƒ½å®ç°ä¸æŒ‰é’®ç»‘å®šä¸ä¸€è‡´é—®é¢˜

#### 1.1 å®ç°æŸ¥çœ‹å®¡æ‰¹è®°å½•åŠŸèƒ½

ä¿®æ”¹`BusinessEventView`ç±»ä¸­çš„`view_approval`æ–¹æ³•ï¼š

```python
def view_approval(self, approval_id):
    """æŸ¥çœ‹å…³è”çš„å®¡æ‰¹è®°å½•"""
    try:
        # è·å–å®¡æ‰¹è®°å½•è¯¦æƒ…
        response = requests.get(
            f"http://localhost:8000/approvals/{approval_id}",
            headers={"Authorization": f"Bearer {self.token}"}
        )
        
        if response.status_code == 200:
            approval_data = response.json()
            
            # æ‰¾åˆ°ä¸»çª—å£
            main_window = self.window()
            if main_window and hasattr(main_window, "content_tabs") and hasattr(main_window, "approval_view"):
                # åˆ‡æ¢åˆ°å®¡æ‰¹ç®¡ç†é€‰é¡¹å¡
                main_window.content_tabs.setCurrentWidget(main_window.approval_view)
                
                # é«˜äº®æ˜¾ç¤ºå¯¹åº”çš„å®¡æ‰¹è®°å½•
                main_window.approval_view.highlight_approval(approval_id)
            else:
                QMessageBox.information(self, "æç¤º", "è¯·æ‰‹åŠ¨åˆ‡æ¢åˆ°å®¡æ‰¹ç®¡ç†ç•Œé¢æŸ¥çœ‹è¯¦æƒ…")
        else:
            QMessageBox.warning(self, "æŸ¥è¯¢å¤±è´¥", f"æ— æ³•è·å–å®¡æ‰¹è®°å½•: {response.text}")
    except Exception as e:
        QMessageBox.warning(self, "é”™è¯¯", f"æŸ¥çœ‹å®¡æ‰¹è®°å½•æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}")
```

#### 1.2 å®ç°æŸ¥çœ‹è´¢åŠ¡è®°å½•åŠŸèƒ½

ä¿®æ”¹`BusinessEventView`ç±»ä¸­çš„`view_finance`æ–¹æ³•ï¼š

```python
def view_finance(self, finance_id):
    """æŸ¥çœ‹å…³è”çš„è´¢åŠ¡è®°å½•"""
    try:
        # è·å–è´¢åŠ¡è®°å½•è¯¦æƒ…
        response = requests.get(
            f"http://localhost:8000/financial_records/{finance_id}",
            headers={"Authorization": f"Bearer {self.token}"}
        )
        
        if response.status_code == 200:
            finance_data = response.json()
            
            # æ‰¾åˆ°ä¸»çª—å£
            main_window = self.window()
            if main_window and hasattr(main_window, "content_tabs") and hasattr(main_window, "finance_view"):
                # åˆ‡æ¢åˆ°è´¢åŠ¡ç®¡ç†é€‰é¡¹å¡
                main_window.content_tabs.setCurrentWidget(main_window.finance_view)
                
                # é«˜äº®æ˜¾ç¤ºå¯¹åº”çš„è´¢åŠ¡è®°å½•
                main_window.finance_view.highlight_record(finance_id)
            else:
                QMessageBox.information(self, "æç¤º", "è¯·æ‰‹åŠ¨åˆ‡æ¢åˆ°è´¢åŠ¡ç®¡ç†ç•Œé¢æŸ¥çœ‹è¯¦æƒ…")
        else:
            QMessageBox.warning(self, "æŸ¥è¯¢å¤±è´¥", f"æ— æ³•è·å–è´¢åŠ¡è®°å½•: {response.text}")
    except Exception as e:
        QMessageBox.warning(self, "é”™è¯¯", f"æŸ¥çœ‹è´¢åŠ¡è®°å½•æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}")
```

#### 1.3 å®ç°åˆ›å»ºè´¢åŠ¡è®°å½•åŠŸèƒ½

ä¿®æ”¹`BusinessEventView`ç±»ä¸­çš„`create_finance_record`æ–¹æ³•ï¼š

```python
def create_finance_record(self, business_id):
    """ä¸ºå·²å®¡æ‰¹çš„ä¸šåŠ¡äº‹ä»¶åˆ›å»ºè´¢åŠ¡è®°å½•"""
    try:
        # è·å–ä¸šåŠ¡äº‹ä»¶è¯¦æƒ…
        response = requests.get(
            f"http://localhost:8000/business_events/{business_id}",
            headers={"Authorization": f"Bearer {self.token}"}
        )
        
        if response.status_code == 200:
            event_data = response.json()
            
            # æ‰¾åˆ°ä¸»çª—å£
            main_window = self.window()
            if main_window and hasattr(main_window, "content_tabs") and hasattr(main_window, "finance_view"):
                # åˆ‡æ¢åˆ°è´¢åŠ¡ç®¡ç†é€‰é¡¹å¡
                main_window.content_tabs.setCurrentWidget(main_window.finance_view)
                
                # è°ƒç”¨è´¢åŠ¡è§†å›¾çš„åˆ›å»ºè®°å½•æ–¹æ³•ï¼Œä¼ å…¥ä¸šåŠ¡äº‹ä»¶æ•°æ®
                main_window.finance_view.create_from_business(business_id)
            else:
                QMessageBox.information(self, "æç¤º", "è¯·æ‰‹åŠ¨åˆ‡æ¢åˆ°è´¢åŠ¡ç®¡ç†ç•Œé¢åˆ›å»ºè´¢åŠ¡è®°å½•")
        else:
            QMessageBox.warning(self, "æŸ¥è¯¢å¤±è´¥", f"æ— æ³•è·å–ä¸šåŠ¡äº‹ä»¶è¯¦æƒ…: {response.text}")
    except Exception as e:
        QMessageBox.warning(self, "é”™è¯¯", f"åˆ›å»ºè´¢åŠ¡è®°å½•æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}")
```

### 2. å®ç°å…¨å±€åˆ·æ–°åŠŸèƒ½

#### 2.1 åœ¨ä¸»çª—å£ä¸­æ·»åŠ åˆ·æ–°æ–¹æ³•

åœ¨`MainWindow`ç±»ä¸­æ·»åŠ åˆ·æ–°æ–¹æ³•ï¼š

```python
def refresh_current_view(self):
    """åˆ·æ–°å½“å‰è§†å›¾çš„æ•°æ®"""
    current_widget = self.content_tabs.currentWidget()
    
    if hasattr(current_widget, "load_data"):
        try:
            # æ˜¾ç¤ºåˆ·æ–°ä¸­çš„çŠ¶æ€
            self.statusBar.showMessage("æ­£åœ¨åˆ·æ–°æ•°æ®...", 2000)
            
            # è°ƒç”¨å½“å‰è§†å›¾çš„load_dataæ–¹æ³•
            current_widget.load_data()
            
            # æ›´æ–°çŠ¶æ€æ 
            self.statusBar.showMessage("æ•°æ®åˆ·æ–°æˆåŠŸ", 2000)
        except Exception as e:
            self.statusBar.showMessage(f"åˆ·æ–°å¤±è´¥: {str(e)}", 3000)
            QMessageBox.warning(self, "åˆ·æ–°å¤±è´¥", f"åˆ·æ–°æ•°æ®æ—¶å‘ç”Ÿé”™è¯¯: {str(e)}")
    else:
        self.statusBar.showMessage("å½“å‰è§†å›¾ä¸æ”¯æŒåˆ·æ–°", 2000)
```

#### 2.2 è¿æ¥åˆ·æ–°æŒ‰é’®

åœ¨`MainWindow`ç±»çš„`init_ui`æ–¹æ³•ä¸­ï¼Œè¿æ¥åˆ·æ–°æŒ‰é’®ï¼š

```python
# æ·»åŠ åˆ·æ–°æŒ‰é’®
refresh_action = QAction("ğŸ”„ åˆ·æ–°", self)
refresh_action.setToolTip("åˆ·æ–°å½“å‰è§†å›¾æ•°æ®")
refresh_action.triggered.connect(self.refresh_current_view)  # è¿æ¥åˆ°åˆ·æ–°æ–¹æ³•
quick_actions.addAction(refresh_action)
```

### 3. å®ç°æ¨¡å—é—´è·³è½¬åŠŸèƒ½

#### 3.1 åœ¨ä¸»çª—å£ä¸­æ·»åŠ æ¨¡å—åˆ‡æ¢æ–¹æ³•

åœ¨`MainWindow`ç±»ä¸­æ·»åŠ ä»¥ä¸‹æ–¹æ³•ï¼š

```python
def switch_to_business_view(self):
    """åˆ‡æ¢åˆ°ä¸šåŠ¡ç®¡ç†è§†å›¾"""
    if hasattr(self, "business_view"):
        self.content_tabs.setCurrentWidget(self.business_view)
        nav_button = self.findChild(QPushButton, "nav_ä¸šåŠ¡ç®¡ç†")
        if nav_button:
            self.change_page(0, nav_button, "ä¸šåŠ¡ç®¡ç†")

def switch_to_finance_view(self):
    """åˆ‡æ¢åˆ°è´¢åŠ¡ç®¡ç†è§†å›¾"""
    if hasattr(self, "finance_view"):
        self.content_tabs.setCurrentWidget(self.finance_view)
        nav_button = self.findChild(QPushButton, "nav_è´¢åŠ¡ç®¡ç†")
        if nav_button:
            self.change_page(1, nav_button, "è´¢åŠ¡ç®¡ç†")

def switch_to_approval_view(self, approval_id=None):
    """åˆ‡æ¢åˆ°å®¡æ‰¹ç®¡ç†è§†å›¾"""
    if hasattr(self, "approval_view"):
        self.content_tabs.setCurrentWidget(self.approval_view)
        nav_button = self.findChild(QPushButton, "nav_å®¡æ‰¹ç®¡ç†")
        if nav_button:
            self.change_page(2, nav_button, "å®¡æ‰¹ç®¡ç†")
        
        # å¦‚æœæä¾›äº†å®¡æ‰¹IDï¼Œé«˜äº®æ˜¾ç¤ºå¯¹åº”çš„å®¡æ‰¹è®°å½•
        if approval_id and hasattr(self.approval_view, "highlight_approval"):
            self.approval_view.highlight_approval(approval_id)

def switch_to_budget_view(self):
    """åˆ‡æ¢åˆ°é¢„ç®—ç®¡ç†è§†å›¾"""
    if hasattr(self, "budget_view"):
        self.content_tabs.setCurrentWidget(self.budget_view)
        nav_button = self.findChild(QPushButton, "nav_é¢„ç®—ç®¡ç†")
        if nav_button:
            self.change_page(3, nav_button, "é¢„ç®—ç®¡ç†")
```

#### 3.2 åœ¨å„æ¨¡å—ä¸­æ·»åŠ é«˜äº®æ–¹æ³•

åœ¨`ApprovalView`ç±»ä¸­æ·»åŠ é«˜äº®æ–¹æ³•ï¼š

```python
def highlight_approval(self, approval_id):
    """é«˜äº®æ˜¾ç¤ºæŒ‡å®šçš„å®¡æ‰¹è®°å½•"""
    # åˆ·æ–°æ•°æ®
    self.load_data()
    
    # æŸ¥æ‰¾å¹¶é«˜äº®æ˜¾ç¤ºå¯¹åº”çš„è¡Œ
    for row in range(self.table.rowCount()):
        if self.table.item(row, 0).text() == str(approval_id):
            # é€‰ä¸­è¯¥è¡Œ
            self.table.selectRow(row)
            # æ»šåŠ¨åˆ°è¯¥è¡Œ
            self.table.scrollToItem(self.table.item(row, 0))
            break
```

åœ¨`FinancialRecordView`ç±»ä¸­æ·»åŠ é«˜äº®æ–¹æ³•ï¼š

```python
def highlight_record(self, record_id):
    """é«˜äº®æ˜¾ç¤ºæŒ‡å®šçš„è´¢åŠ¡è®°å½•"""
    # åˆ‡æ¢åˆ°è´¢åŠ¡è®°å½•é€‰é¡¹å¡
    if hasattr(self, "tabs"):
        self.tabs.setCurrentIndex(1)  # å‡è®¾è´¢åŠ¡è®°å½•æ˜¯ç¬¬äºŒä¸ªé€‰é¡¹å¡
    
    # åˆ·æ–°æ•°æ®
    self.load_data()
    
    # æŸ¥æ‰¾å¹¶é«˜äº®æ˜¾ç¤ºå¯¹åº”çš„è¡Œ
    for row in range(self.table.rowCount()):
        if self.table.item(row, 0).text() == str(record_id):
            # é€‰ä¸­è¯¥è¡Œ
            self.table.selectRow(row)
            # æ»šåŠ¨åˆ°è¯¥è¡Œ
            self.table.scrollToItem(self.table.item(row, 0))
            break
```

### 4. å®ç°å…¶ä»–åŠŸèƒ½

#### 4.1 å®ç°ç³»ç»Ÿè®¾ç½®åŠŸèƒ½

åœ¨`MainWindow`ç±»ä¸­æ·»åŠ ç³»ç»Ÿè®¾ç½®æ–¹æ³•ï¼š

```python
def show_settings_dialog(self):
    """æ˜¾ç¤ºç³»ç»Ÿè®¾ç½®å¯¹è¯æ¡†"""
    # åˆ›å»ºä¸€ä¸ªç®€å•çš„è®¾ç½®å¯¹è¯æ¡†
    dialog = QDialog(self)
    dialog.setWindowTitle("ç³»ç»Ÿè®¾ç½®")
    dialog.setMinimumWidth(400)
    
    layout = QVBoxLayout(dialog)
    
    # æ·»åŠ è®¾ç½®é€‰é¡¹
    form_layout = QFormLayout()
    
    # ä¸»é¢˜è®¾ç½®
    theme_combo = QComboBox()
    theme_combo.addItems(["é»˜è®¤ä¸»é¢˜", "æš—è‰²ä¸»é¢˜", "æµ…è‰²ä¸»é¢˜"])
    form_layout.addRow("ç•Œé¢ä¸»é¢˜:", theme_combo)
    
    # å­—ä½“å¤§å°è®¾ç½®
    font_size_combo = QComboBox()
    font_size_combo.addItems(["å°", "ä¸­", "å¤§"])
    font_size_combo.setCurrentIndex(1)  # é»˜è®¤é€‰ä¸­"ä¸­"
    form_layout.addRow("å­—ä½“å¤§å°:", font_size_combo)
    
    # è‡ªåŠ¨åˆ·æ–°è®¾ç½®
    auto_refresh_check = QCheckBox("å¯ç”¨")
    form_layout.addRow("è‡ªåŠ¨åˆ·æ–°:", auto_refresh_check)
    
    layout.addLayout(form_layout)
    
    # æ·»åŠ æŒ‰é’®
    button_layout = QHBoxLayout()
    cancel_button = QPushButton("å–æ¶ˆ")
    cancel_button.clicked.connect(dialog.reject)
    
    save_button = QPushButton("ä¿å­˜")
    save_button.clicked.connect(dialog.accept)
    
    button_layout.addStretch()
    button_layout.addWidget(cancel_button)
    button_layout.addWidget(save_button)
    
    layout.addLayout(button_layout)
    
    # æ˜¾ç¤ºå¯¹è¯æ¡†
    if dialog.exec() == QDialog.DialogCode.Accepted:
        # ä¿å­˜è®¾ç½®
        self.settings.setValue("theme", theme_combo.currentText())
        self.settings.setValue("font_size", font_size_combo.currentText())
        self.settings.setValue("auto_refresh", auto_refresh_check.isChecked())
        
        QMessageBox.information(self, "è®¾ç½®å·²ä¿å­˜", "ç³»ç»Ÿè®¾ç½®å·²ä¿å­˜ï¼Œéƒ¨åˆ†è®¾ç½®å¯èƒ½éœ€è¦é‡å¯åº”ç”¨åç”Ÿæ•ˆ")
```

åœ¨`MainWindow`ç±»çš„`init_ui`æ–¹æ³•ä¸­ï¼Œè¿æ¥ç³»ç»Ÿè®¾ç½®æŒ‰é’®ï¼š

```python
# æ·»åŠ è®¾ç½®æŒ‰é’®
settings_btn = QPushButton("âš™ ç³»ç»Ÿè®¾ç½®")
settings_btn.setObjectName("settings_btn")
settings_btn.setToolTip("è°ƒæ•´ç³»ç»Ÿè®¾ç½®å’Œä¸ªäººåå¥½")
settings_btn.clicked.connect(self.show_settings_dialog)  # è¿æ¥åˆ°è®¾ç½®æ–¹æ³•
nav_layout.addWidget(settings_btn)
```

#### 4.2 å®ç°å¸®åŠ©åŠŸèƒ½

åœ¨`MainWindow`ç±»ä¸­æ·»åŠ å¸®åŠ©æ–¹æ³•ï¼š

```python
def show_help(self):
    """æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"""
    # è·å–å½“å‰è§†å›¾
    current_widget = self.content_tabs.currentWidget()
    help_title = "ç³»ç»Ÿå¸®åŠ©"
    help_content = "è¿™æ˜¯ä¸šè´¢èåˆç®¡ç†ç³»ç»Ÿçš„å¸®åŠ©ä¿¡æ¯ã€‚"
    
    # æ ¹æ®å½“å‰è§†å›¾æ˜¾ç¤ºä¸åŒçš„å¸®åŠ©ä¿¡æ¯
    if isinstance(current_widget, BusinessEventView):
        help_title = "ä¸šåŠ¡ç®¡ç†å¸®åŠ©"
        help_content = """
        <h3>ä¸šåŠ¡ç®¡ç†æ¨¡å—ä½¿ç”¨æŒ‡å—</h3>
        <p>ä¸šåŠ¡ç®¡ç†æ¨¡å—ç”¨äºåˆ›å»ºå’Œç®¡ç†ä¸šåŠ¡äº‹ä»¶ï¼ŒåŒ…æ‹¬åˆåŒã€é”€å”®ã€é‡‡è´­å’ŒæŠ¥é”€ç­‰ç±»å‹çš„ä¸šåŠ¡æ´»åŠ¨ã€‚</p>
        <h4>ä¸»è¦åŠŸèƒ½ï¼š</h4>
        <ul>
            <li><b>æ–°å»ºä¸šåŠ¡äº‹ä»¶</b>ï¼šç‚¹å‡»"æ–°å»ºä¸šåŠ¡äº‹ä»¶"æŒ‰é’®ï¼Œå¡«å†™ç›¸å…³ä¿¡æ¯åä¿å­˜ã€‚</li>
            <li><b>æŸ¥çœ‹è¯¦æƒ…</b>ï¼šç‚¹å‡»æ“ä½œåˆ—ä¸­çš„"è¯¦æƒ…"æŒ‰é’®ï¼ŒæŸ¥çœ‹ä¸šåŠ¡äº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
            <li><b>æäº¤å®¡æ‰¹</b>ï¼šå¯¹äº"æ–°å»º"çŠ¶æ€çš„ä¸šåŠ¡äº‹ä»¶ï¼Œå¯ä»¥ç‚¹å‡»"æäº¤å®¡æ‰¹"æŒ‰é’®å°†å…¶æäº¤åˆ°å®¡æ‰¹æµç¨‹ã€‚</li>
            <li><b>åˆ›å»ºè´¢åŠ¡è®°å½•</b>ï¼šå¯¹äº"å·²å®¡æ‰¹"çŠ¶æ€çš„ä¸šåŠ¡äº‹ä»¶ï¼Œå¯ä»¥ç‚¹å‡»"åˆ›å»ºè´¢åŠ¡è®°å½•"æŒ‰é’®åˆ›å»ºå¯¹åº”çš„è´¢åŠ¡è®°å½•ã€‚</li>
        </ul>
        <h4>æœç´¢å’Œç­›é€‰ï¼š</h4>
        <p>å¯ä»¥ä½¿ç”¨é¡¶éƒ¨çš„æœç´¢æ¡†æœç´¢é¡¹ç›®åç§°ï¼Œä½¿ç”¨çŠ¶æ€ä¸‹æ‹‰æ¡†ç­›é€‰ä¸åŒçŠ¶æ€çš„ä¸šåŠ¡äº‹ä»¶ã€‚</p>
        """
    elif isinstance(current_widget, FinancialRecordView):
        help_title = "è´¢åŠ¡ç®¡ç†å¸®åŠ©"
        help_content = """
        <h3>è´¢åŠ¡ç®¡ç†æ¨¡å—ä½¿ç”¨æŒ‡å—</h3>
        <p>è´¢åŠ¡ç®¡ç†æ¨¡å—ç”¨äºåˆ›å»ºå’Œç®¡ç†è´¢åŠ¡è®°å½•ï¼Œå°†ä¸šåŠ¡äº‹ä»¶è½¬åŒ–ä¸ºè´¢åŠ¡æ•°æ®ã€‚</p>
        <h4>ä¸»è¦åŠŸèƒ½ï¼š</h4>
        <ul>
            <li><b>æ–°å»ºè´¢åŠ¡è®°å½•</b>ï¼šç‚¹å‡»"æ–°å»ºè´¢åŠ¡è®°å½•"æŒ‰é’®ï¼Œé€‰æ‹©å…³è”çš„ä¸šåŠ¡äº‹ä»¶ï¼Œå¡«å†™è´¢åŠ¡ä¿¡æ¯åä¿å­˜ã€‚</li>
            <li><b>æŸ¥çœ‹è¯¦æƒ…</b>ï¼šç‚¹å‡»æ“ä½œåˆ—ä¸­çš„"è¯¦æƒ…"æŒ‰é’®ï¼ŒæŸ¥çœ‹è´¢åŠ¡è®°å½•çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
            <li><b>å¾…å¤„ç†ä¸šåŠ¡</b>ï¼šåœ¨"å¾…å¤„ç†ä¸šåŠ¡"é€‰é¡¹å¡ä¸­ï¼Œå¯ä»¥æŸ¥çœ‹å·²å®¡æ‰¹ä½†å°šæœªåˆ›å»ºè´¢åŠ¡è®°å½•çš„ä¸šåŠ¡äº‹ä»¶ã€‚</li>
        </ul>
        <h4>æ³¨æ„äº‹é¡¹ï¼š</h4>
        <p>åˆ›å»ºè´¢åŠ¡è®°å½•æ—¶ï¼Œéœ€è¦é€‰æ‹©æ­£ç¡®çš„ä¼šè®¡ç§‘ç›®å’Œæ”¶æ”¯æ–¹å‘ï¼Œç¡®ä¿è´¢åŠ¡æ•°æ®çš„å‡†ç¡®æ€§ã€‚</p>
        """
    elif isinstance(current_widget, ApprovalView):
        help_title = "å®¡æ‰¹ç®¡ç†å¸®åŠ©"
        help_content = """
        <h3>å®¡æ‰¹ç®¡ç†æ¨¡å—ä½¿ç”¨æŒ‡å—</h3>
        <p>å®¡æ‰¹ç®¡ç†æ¨¡å—ç”¨äºå¤„ç†ä¸šåŠ¡äº‹ä»¶çš„å®¡æ‰¹æµç¨‹ã€‚</p>
        <h4>ä¸»è¦åŠŸèƒ½ï¼š</h4>
        <ul>
            <li><b>å®¡æ‰¹é€šè¿‡</b>ï¼šç‚¹å‡»"é€šè¿‡"æŒ‰é’®ï¼Œå¯¹ä¸šåŠ¡äº‹ä»¶è¿›è¡Œå®¡æ‰¹é€šè¿‡æ“ä½œã€‚</li>
            <li><b>å®¡æ‰¹æ‹’ç»</b>ï¼šç‚¹å‡»"æ‹’ç»"æŒ‰é’®ï¼Œå¯¹ä¸šåŠ¡äº‹ä»¶è¿›è¡Œå®¡æ‰¹æ‹’ç»æ“ä½œã€‚</li>
            <li><b>æŸ¥çœ‹è¯¦æƒ…</b>ï¼šç‚¹å‡»"è¯¦æƒ…"æŒ‰é’®ï¼ŒæŸ¥çœ‹å®¡æ‰¹è®°å½•çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
        </ul>
        <h4>å®¡æ‰¹æµç¨‹ï¼š</h4>
        <p>ä¸šåŠ¡äº‹ä»¶æäº¤å®¡æ‰¹åï¼Œä¼šæ ¹æ®å®¡æ‰¹é…ç½®åˆ†é…ç»™ç›¸åº”çš„å®¡æ‰¹äººã€‚å®¡æ‰¹é€šè¿‡åï¼Œä¸šåŠ¡äº‹ä»¶çŠ¶æ€å˜ä¸º"å·²å®¡æ‰¹"ï¼Œå¯ä»¥åˆ›å»ºè´¢åŠ¡è®°å½•ã€‚</p>
        """
    elif isinstance(current_widget, BudgetView):
        help_title = "é¢„ç®—ç®¡ç†å¸®åŠ©"
        help_content = """
        <h3>é¢„ç®—ç®¡ç†æ¨¡å—ä½¿ç”¨æŒ‡å—</h3>
        <p>é¢„ç®—ç®¡ç†æ¨¡å—ç”¨äºç®¡ç†å’Œç›‘æ§å„éƒ¨é—¨çš„é¢„ç®—ä½¿ç”¨æƒ…å†µã€‚</p>
        <h4>ä¸»è¦åŠŸèƒ½ï¼š</h4>
        <ul>
            <li><b>é¢„ç®—ç¼–åˆ¶</b>ï¼šè®¾ç½®å„éƒ¨é—¨çš„é¢„ç®—é‡‘é¢ã€‚</li>
            <li><b>é¢„ç®—æ‰§è¡Œ</b>ï¼šæŸ¥çœ‹å„éƒ¨é—¨çš„é¢„ç®—ä½¿ç”¨æƒ…å†µã€‚</li>
            <li><b>é¢„ç®—åˆ†æ</b>ï¼šåˆ†æé¢„ç®—æ‰§è¡Œæƒ…å†µï¼Œç”ŸæˆæŠ¥è¡¨ã€‚</li>
        </ul>
        <h4>æ³¨æ„äº‹é¡¹ï¼š</h4>
        <p>é¢„ç®—ç®¡ç†éœ€è¦ä¸è´¢åŠ¡è®°å½•å…³è”ï¼Œç¡®ä¿é¢„ç®—ä½¿ç”¨æƒ…å†µçš„å‡†ç¡®æ€§ã€‚</p>
        """
    
    # åˆ›å»ºå¸®åŠ©å¯¹è¯æ¡†
    msg_box = QMessageBox(self)
    msg_box.setWindowTitle(help_title)
    msg_box.setTextFormat(Qt.TextFormat.RichText)
    msg_box.setText(help_content)
    msg_box.setStandardButtons(QMessageBox.StandardButton.Ok)
    msg_box.exec()
```

åœ¨`MainWindow`ç±»çš„`init_ui`æ–¹æ³•ä¸­ï¼Œè¿æ¥å¸®åŠ©æŒ‰é’®ï¼š

```python
# æ·»åŠ å¸®åŠ©æŒ‰é’®
help_action = QAction("â“ å¸®åŠ©", self) 
help_action.setToolTip("è·å–åŠŸèƒ½å¸®åŠ©")
help_action.triggered.connect(self.show_help)  # è¿æ¥åˆ°å¸®åŠ©æ–¹æ³•
quick_actions.addAction(help_action)
```

## å®æ–½æ­¥éª¤

### æ­¥éª¤1ï¼šä¿®æ”¹ä¸»çª—å£ç±»

1. æ‰“å¼€`main_window.py`æ–‡ä»¶
2. æ·»åŠ `refresh_current_view`æ–¹æ³•
3. æ·»åŠ æ¨¡å—åˆ‡æ¢æ–¹æ³•ï¼ˆ`switch_to_business_view`ã€`switch_to_finance_view`ç­‰ï¼‰
4. æ·»åŠ ç³»ç»Ÿè®¾ç½®æ–¹æ³•ï¼ˆ`show_settings_dialog`ï¼‰
5. æ·»åŠ å¸®åŠ©æ–¹æ³•ï¼ˆ`show_help`ï¼‰
6. è¿æ¥åˆ·æ–°æŒ‰é’®ã€ç³»ç»Ÿè®¾ç½®æŒ‰é’®å’Œå¸®åŠ©æŒ‰é’®

### æ­¥éª¤2ï¼šä¿®æ”¹ä¸šåŠ¡ç®¡ç†è§†å›¾

1. æ‰“å¼€`views/business_view.py`æ–‡ä»¶
2. ä¿®æ”¹`view_approval`æ–¹æ³•ï¼Œå®ç°è·³è½¬åˆ°å®¡æ‰¹è¯¦æƒ…åŠŸèƒ½
3. ä¿®æ”¹`view_finance`æ–¹æ³•ï¼Œå®ç°è·³è½¬åˆ°è´¢åŠ¡è®°å½•è¯¦æƒ…åŠŸèƒ½
4. ä¿®æ”¹`create_finance_record`æ–¹æ³•ï¼Œå®ç°åˆ›å»ºè´¢åŠ¡è®°å½•åŠŸèƒ½
5. ä¿®æ”¹`submit_to_approval`æ–¹æ³•ï¼Œä½¿ç”¨ä¸»çª—å£çš„`switch_to_approval_view`æ–¹æ³•

### æ­¥éª¤3ï¼šä¿®æ”¹å®¡æ‰¹ç®¡ç†è§†å›¾

1. æ‰“å¼€`views/approval_view.py`æ–‡ä»¶
2. æ·»åŠ `highlight_approval`æ–¹æ³•ï¼Œå®ç°é«˜äº®æ˜¾ç¤ºæŒ‡å®šå®¡æ‰¹è®°å½•çš„åŠŸèƒ½

### æ­¥éª¤4ï¼šä¿®æ”¹è´¢åŠ¡ç®¡ç†è§†å›¾

1. æ‰“å¼€`views/finance_view.py`æ–‡ä»¶
2. æ·»åŠ `highlight_record`æ–¹æ³•ï¼Œå®ç°é«˜äº®æ˜¾ç¤ºæŒ‡å®šè´¢åŠ¡è®°å½•çš„åŠŸèƒ½

### æ­¥éª¤5ï¼šæµ‹è¯•åŠŸèƒ½

1. æµ‹è¯•å…¨å±€åˆ·æ–°åŠŸèƒ½
2. æµ‹è¯•æ¨¡å—é—´è·³è½¬åŠŸèƒ½
3. æµ‹è¯•ç³»ç»Ÿè®¾ç½®åŠŸèƒ½
4. æµ‹è¯•å¸®åŠ©åŠŸèƒ½

## æ³¨æ„äº‹é¡¹

1. **ä¿æŒä»£ç ä¸€è‡´æ€§**ï¼šç¡®ä¿æ–°æ·»åŠ çš„ä»£ç ä¸ç°æœ‰ä»£ç é£æ ¼ä¸€è‡´
2. **é”™è¯¯å¤„ç†**ï¼šæ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†ï¼Œé¿å…ç¨‹åºå´©æºƒ
3. **ç”¨æˆ·ä½“éªŒ**ï¼šæ·»åŠ é€‚å½“çš„çŠ¶æ€åé¦ˆï¼Œè®©ç”¨æˆ·çŸ¥é“æ“ä½œæ˜¯å¦æˆåŠŸ
4. **ä»£ç æ³¨é‡Š**ï¼šä¸ºæ–°æ·»åŠ çš„ä»£ç æ·»åŠ è¯¦ç»†çš„æ³¨é‡Šï¼Œä¾¿äºåæœŸç»´æŠ¤
5. **åŠŸèƒ½æµ‹è¯•**ï¼šæ¯å®Œæˆä¸€ä¸ªåŠŸèƒ½å°±è¿›è¡Œæµ‹è¯•ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸å·¥ä½œ

## æ€»ç»“

é€šè¿‡ä»¥ä¸Šä¿®æ”¹ï¼Œå¯ä»¥è§£å†³ç³»ç»Ÿæ“ä½œé€»è¾‘æ··ä¹±çš„é—®é¢˜ï¼Œå®ç°åŠŸèƒ½ä¸æŒ‰é’®ç»‘å®šçš„ä¸€è‡´æ€§ï¼Œæ·»åŠ å…¨å±€åˆ·æ–°åŠŸèƒ½ï¼Œå®Œå–„æ¨¡å—é—´è·³è½¬é€»è¾‘ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†æ–¹å¼ï¼Œæ˜ç¡®åŠŸèƒ½çŠ¶æ€ã€‚è¿™äº›æ”¹è¿›å°†å¤§å¤§æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚
